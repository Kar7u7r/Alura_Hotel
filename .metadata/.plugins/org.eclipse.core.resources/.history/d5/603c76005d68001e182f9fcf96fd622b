package DAOS;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.List;

import views.ReservasView;

public class ReservasBusquedaDAO {
	private Connection con;

	public ReservasBusquedaDAO(Connection con) {
		this.con = con;
	}

	public List<ReservasView> obtenerTodasLasReservas() {
		List<ReservasView> reservas = new ArrayList<>();

		try (
				PreparedStatement statement = con.prepareStatement("SELECT * FROM reservations");
				ResultSet result = statement.executeQuery()) {

			while (result.next()) {
				Reserva reserva = new Reserva();
				reserva.setId(result.getInt("ID"));
				reserva.setFechaEntrada(result.getDate("DATE_OF_ENTRY"));
				reserva.setFechaSalida(result.getDate("DEPARTURE_DATE"));
				reserva.setGvalue(result.getString("Gvalue"));
				reserva.setPago(result.getString("payment"));
				reservas.add(reserva);
			}

		} catch (SQLException e) {
			e.printStackTrace();
		}

		return reservas;
	}

}
